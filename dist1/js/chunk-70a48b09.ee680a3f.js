(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70a48b09"],{"09f7":function(e,s,t){"use strict";t("9562")},2757:function(e,s,t){e.exports=t.p+"img/login_pic.cb101470.png"},9562:function(e,s,t){},a2c0:function(e,s,t){"use strict";t.r(s);var o=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"wrap"},[e._m(0),t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"box"},[t("van-field",{attrs:{placeholder:"请输入手机号",rules:[{required:!0,message:"请填写手机号"}]},model:{value:e.mobile,callback:function(s){e.mobile=s},expression:"mobile"}}),t("van-field",{attrs:{type:"password",placeholder:"请输入密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.password,callback:function(s){e.password=s},expression:"password"}}),t("div",{staticClass:"pass"},[t("span",[e._v("找回密码")]),t("span",{on:{click:e.onShow}},[e._v("注册/验证登录码")])]),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{click:e.onLogin}},[e._v(" 登录 ")])],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"box"},[t("div",{staticClass:"phone"},[t("van-field",{attrs:{placeholder:"请输入手机号",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.mobile,callback:function(s){e.mobile=s},expression:"mobile"}}),[t("div",{staticClass:"times"},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.getCode,expression:"getCode"}],staticClass:"yzm",on:{click:e.sendCode}},[e._v("获取验证码")]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.getCode,expression:"!getCode"}],staticClass:"time"},[e._v("获取验证码("+e._s(e.time)+")")])])]],2),t("van-field",{attrs:{type:"text",placeholder:"请输入短信验证码",rules:[{required:!0,message:"请填写短信验证码"}]},model:{value:e.sms_code,callback:function(s){e.sms_code=s},expression:"sms_code"}}),t("div",{staticClass:"pass"},[t("span",[e._v("*未注册的手机号将自动注册")]),t("span",{on:{click:e.onShow}},[e._v("使用密码登录")])]),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"},on:{click:e.onSubmit}},[e._v(" 登录 ")])],1)],1)])},i=[function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("div",{staticClass:"photo"},[o("img",{attrs:{src:t("2757"),alt:""}})])}],a=t("a593"),l=t("e90d"),n=(t("8587"),t("b775"));function c(e){return n["a"].post("http://120.53.31.103:84/api/app/smsCode",e)}a["default"].use(l["a"]);var r={data(){return{show:!0,mobile:"",password:"",getCode:!0,time:10,timeout:"",sms_code:""}},created(){},mounted(){},watch:{getCode(e){e||(this.time=10,this.timeout=setInterval(()=>{this.time--,this.time<0&&(this.getCode=!0,clearInterval(this.timeout))},1e3))}},methods:{async onLogin(){let e=await this.$http.post("/api/app/login",{mobile:this.mobile,sms_code:this.sms_code,type:1});console.log(e),201==e.data.code&&this.$router.push("/my")},async onSubmit(){console.log(111);let e=await this.$http.post("/api/app/login",{mobile:this.mobile,sms_code:this.sms_code,type:2,client:1});console.log(e),200==e.code?(localStorage.Token=e.data.remember_token,localStorage.deviceid=e.data.device_id,1==e.data.is_new?this.$router.push("/setPass"):this.$router.push("/my")):this.$toast({message:"验证码错误",position:"top"}),console.log(e),console.log(this.mobile),console.log(this.sms_code)},onShow(){this.show=!this.show},async sendCode(){if(!this.getCode)return void this.$toast("点击频繁");let e=/^1[3456789]\d{9}$/;if(e.test(this.mobile)){let e=await c({mobile:this.mobile,sms_type:"login"});console.log(e),200==e.code?this.getCode=!1:this.$toast("请求频繁")}else this.$toast("请输入正确手机号")}}},d=r,m=(t("09f7"),t("2c07")),p=Object(m["a"])(d,o,i,!1,null,"0d89f73e",null);s["default"]=p.exports}}]);
//# sourceMappingURL=chunk-70a48b09.ee680a3f.js.map