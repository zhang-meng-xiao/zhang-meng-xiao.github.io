{"version":3,"sources":["webpack:///./src/views/Login/login.vue?5880","webpack:///./src/assets/login_pic.png","webpack:///./src/views/Login/login.vue?f488","webpack:///./src/utils/api.js","webpack:///src/views/Login/login.vue","webpack:///./src/views/Login/login.vue?b09a","webpack:///./src/views/Login/login.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","directives","name","rawName","value","expression","attrs","required","message","model","callback","$$v","mobile","password","_v","on","onShow","staticStyle","onLogin","show","sendCode","getCode","_s","time","sms_code","onSubmit","staticRenderFns","smcodeAjax","data","post","use","timeout","watch","val","setInterval","clearInterval","methods","res","$http","type","console","log","code","$router","push","client","localStorage","Token","remember_token","deviceid","device_id","is_new","$toast","position","phone","test","sms_type","component"],"mappings":"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","file":"js/chunk-70a48b09.ee680a3f.js","sourcesContent":["export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.9.4@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@7.3.1@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.4@vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=style&index=0&id=0d89f73e&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/login_pic.cb101470.png\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_vm._m(0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}],staticClass:\"box\"},[_c('van-field',{attrs:{\"placeholder\":\"请输入手机号\",\"rules\":[{ required: true, message: '请填写手机号' }]},model:{value:(_vm.mobile),callback:function ($$v) {_vm.mobile=$$v},expression:\"mobile\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\",\"rules\":[{ required: true, message: '请填写密码' }]},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('div',{staticClass:\"pass\"},[_c('span',[_vm._v(\"找回密码\")]),_c('span',{on:{\"click\":_vm.onShow}},[_vm._v(\"注册/验证登录码\")])]),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"},on:{\"click\":_vm.onLogin}},[_vm._v(\" 登录 \")])],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.show),expression:\"!show\"}],staticClass:\"box\"},[_c('div',{staticClass:\"phone\"},[_c('van-field',{attrs:{\"placeholder\":\"请输入手机号\",\"rules\":[{ required: true, message: '请填写用户名' }]},model:{value:(_vm.mobile),callback:function ($$v) {_vm.mobile=$$v},expression:\"mobile\"}}),[_c('div',{staticClass:\"times\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.getCode),expression:\"getCode\"}],staticClass:\"yzm\",on:{\"click\":_vm.sendCode}},[_vm._v(\"获取验证码\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.getCode),expression:\"!getCode\"}],staticClass:\"time\"},[_vm._v(\"获取验证码(\"+_vm._s(_vm.time)+\")\")])])]],2),_c('van-field',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入短信验证码\",\"rules\":[{ required: true, message: '请填写短信验证码' }]},model:{value:(_vm.sms_code),callback:function ($$v) {_vm.sms_code=$$v},expression:\"sms_code\"}}),_c('div',{staticClass:\"pass\"},[_c('span',[_vm._v(\"*未注册的手机号将自动注册\")]),_c('span',{on:{\"click\":_vm.onShow}},[_vm._v(\"使用密码登录\")])]),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\" 登录 \")])],1)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"photo\"},[_c('img',{attrs:{\"src\":require(\"@/assets/login_pic.png\"),\"alt\":\"\"}})])}]\n\nexport { render, staticRenderFns }","import axios from \"./request.js\"\r\nimport http from \"axios\"\r\n\r\nexport function gets(url,data){\r\n\r\n    return axios.get(url,{\r\n       params:data\r\n    })\r\n\r\n}\r\n\r\nexport function pots(url,data){\r\n\r\n    return axios.get(url,data)\r\n\r\n}\r\n\r\n\r\n// 封装获取数据的接口\r\nexport function all(type,pages){\r\n       \r\n    return axios.get(\"topics\",{params:{\r\n          tab:type,\r\n          page:pages\r\n    }})\r\n}\r\n\r\n//获取验证码接口\r\nexport function smcodeAjax(data){\r\n\r\n    return axios.post(\"http://120.53.31.103:84/api/app/smsCode\",data)\r\n\r\n}\r\n\r\n\r\n\r\n","<template>\r\n  <div class=\"wrap\">\r\n    <div class=\"photo\">\r\n      <img src=\"@/assets/login_pic.png\" alt=\"\" />\r\n    </div>\r\n    <!-- 登录 -->\r\n    <div class=\"box\" v-show=\"show\">\r\n      <van-field\r\n        v-model=\"mobile\"\r\n        placeholder=\"请输入手机号\"\r\n        :rules=\"[{ required: true, message: '请填写手机号' }]\"\r\n      />\r\n      <van-field\r\n        v-model=\"password\"\r\n        type=\"password\"\r\n        placeholder=\"请输入密码\"\r\n        :rules=\"[{ required: true, message: '请填写密码' }]\"\r\n      />\r\n      <div class=\"pass\">\r\n        <span>找回密码</span>\r\n        <span @click=\"onShow\">注册/验证登录码</span>\r\n      </div>\r\n      <div style=\"margin: 16px\">\r\n        <van-button\r\n          round\r\n          block\r\n          type=\"info\"\r\n          native-type=\"submit\"\r\n          @click=\"onLogin\"\r\n        >\r\n          登录\r\n        </van-button>\r\n      </div>\r\n    </div>\r\n    <!-- 注册 -->\r\n    <div class=\"box\" v-show=\"!show\">\r\n      <div class=\"phone\">\r\n        <van-field\r\n          v-model=\"mobile\"\r\n          placeholder=\"请输入手机号\"\r\n          :rules=\"[{ required: true, message: '请填写用户名' }]\"\r\n        />\r\n        <template>\r\n          <div class=\"times\">\r\n            <span class=\"yzm\" v-show=\"getCode\" @click=\"sendCode\"\r\n              >获取验证码</span\r\n            >\r\n            <div class=\"time\" v-show=\"!getCode\">获取验证码({{ time }})</div>\r\n          </div>\r\n        </template>\r\n      </div>\r\n      <van-field\r\n        v-model=\"sms_code\"\r\n        type=\"text\"\r\n        placeholder=\"请输入短信验证码\"\r\n        :rules=\"[{ required: true, message: '请填写短信验证码' }]\"\r\n      />\r\n      <div class=\"pass\">\r\n        <span>*未注册的手机号将自动注册</span>\r\n        <span @click=\"onShow\">使用密码登录</span>\r\n      </div>\r\n      <div style=\"margin: 16px\">\r\n        <van-button\r\n          round\r\n          block\r\n          type=\"info\"\r\n          native-type=\"submit\"\r\n          @click=\"onSubmit\"\r\n        >\r\n          登录\r\n        </van-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from \"vue\";\r\nimport { CellGroup, Field } from \"vant\";\r\nVue.use(Field);\r\nimport axios from \"axios\";\r\nimport { smcodeAjax } from \"@/utils/api.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      show: true,\r\n      mobile: \"\",\r\n      password: \"\",\r\n      getCode: true,\r\n      time: 10,\r\n      timeout: \"\",\r\n      sms_code: \"\",\r\n    };\r\n  },\r\n  created() {},\r\n  mounted() {},\r\n  watch: {\r\n    //判断验证码计时器\r\n    getCode(val) {\r\n      if (!val) {\r\n        this.time = 10;\r\n        this.timeout = setInterval(() => {\r\n          this.time--;\r\n          if (this.time < 0) {\r\n            this.getCode = true;\r\n            clearInterval(this.timeout);\r\n          }\r\n        }, 1000);\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    //登录\r\n    async onLogin() {\r\n      let res = await this.$http.post(\"/api/app/login\",{mobile: this.mobile,\r\n        sms_code: this.sms_code,\r\n        type: 1, });\r\n        \r\n      console.log(res)\r\n      if(res.data.code==201){\r\n        this.$router.push('/my')\r\n      }\r\n    },\r\n    //登录接口\r\n    async onSubmit() {\r\n      console.log(111);\r\n      let res = await this.$http.post(\"/api/app/login\", {\r\n        mobile: this.mobile,\r\n        sms_code: this.sms_code,\r\n        type: 2,\r\n        client: 1,\r\n      });\r\n      console.log(res);\r\n      if (res.code == 200) {\r\n        localStorage.Token = res.data.remember_token;\r\n        localStorage.deviceid = res.data.device_id;\r\n        if (res.data.is_new == 1) {\r\n          this.$router.push(\"/setPass\");\r\n        } else {\r\n          this.$router.push(\"/my\");\r\n        }\r\n      } else {\r\n        this.$toast({\r\n          message: \"验证码错误\",\r\n          position: \"top\",\r\n        });\r\n      }\r\n      console.log(res);\r\n      console.log(this.mobile);\r\n      console.log(this.sms_code);\r\n    },\r\n    //显示登录或者注册内容\r\n    onShow() {\r\n      this.show = !this.show;\r\n    },\r\n\r\n    //获取验证码\r\n    async sendCode() {\r\n      if (!this.getCode) {\r\n        this.$toast(\"点击频繁\");\r\n        return;\r\n      }\r\n      let phone = /^1[3456789]\\d{9}$/;\r\n      if (phone.test(this.mobile)) {\r\n        let data = await smcodeAjax({ mobile: this.mobile, sms_type: \"login\" });\r\n        // this.$toast(data.msg)\r\n        console.log(data);\r\n        if (data.code == 200) {\r\n          this.getCode = false;\r\n        } else {\r\n          this.$toast(\"请求频繁\");\r\n        }\r\n      } else {\r\n        this.$toast(\"请输入正确手机号\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.wrap {\r\n  background: white;\r\n}\r\n.photo {\r\n  width: 100vw;\r\n  height: 30vh;\r\n  //   background: rgb(233, 129, 129);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  img {\r\n    width: 80vw;\r\n    height: 20vh;\r\n  }\r\n}\r\n.box {\r\n  width: 100vw;\r\n}\r\n.van-button {\r\n  background: orangered;\r\n  border: 0;\r\n}\r\n.pass {\r\n  width: 100vw;\r\n  height: 8vh;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0 0.2rem;\r\n  box-sizing: border-box;\r\n  font-size: 0.15rem;\r\n  color: gray;\r\n}\r\n.phone {\r\n  position: relative;\r\n}\r\n.yzm {\r\n  position: absolute;\r\n  top: 12px;\r\n  right: 25px;\r\n  color: orangered;\r\n  font-size: 0.15rem;\r\n}\r\n.times {\r\n  width: 100px;\r\n  position: absolute;\r\n  top: 12px;\r\n  right: 10px;\r\n  color: orangered;\r\n  font-size: 0.12rem;\r\n}\r\n.time {\r\n  display: flex;\r\n  color: gray;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.4@vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.4@vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=0d89f73e&scoped=true&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&id=0d89f73e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.4@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d89f73e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}